<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>JSONP实践 案例</title>
	</head>
	<script>
		//同源：协议、域名、端口号必须完全相同
		//违背同源策略就是跨域
	</script>
	<body>
		用户名: <input type="text" id="username" />
		<p></p>
		<script>
			const input = document.getElementsByTagName("input")[0];
			const p = document.getElementsByTagName("p")[0];
			//声明handle函数处理数据
			function handle(data) {
				input.style.border = "solid 1px #f00";
				//修改p标签的提示文本
				p.innerHTML = data.msg;
			}
			//绑定失去焦点事件
			input.onblur = function () {
				let username = this.value;
				//向服务器端发送请求，检测用户名是否存在
				//1.创建script标签
				const script = document.createElement("script");
				//2.设置标签的src属性
				script.src = "http:127.0.0.1:8000/check-username";
				//3.将script插入到文档中
				document.body.append(script);
			};
		</script>
	</body>
</html>
